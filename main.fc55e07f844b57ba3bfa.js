(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var o=function(){return e=function e(t){var r=t.scoreId,n=t.recordId,o=t.timerId,i=t.boardId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scoreElem=document.getElementById(r),this.recordElem=document.getElementById(n),this.timerElem=document.getElementById(o),this.board=document.getElementById(i)},(t=[{key:"renderScore",value:function(e){this.scoreElem.textContent="Очки: ".concat(e)}},{key:"renderRecord",value:function(e){this.recordElem.textContent="Рекорд: ".concat(e)}},{key:"renderTimer",value:function(e){this.timerElem.textContent="Время: ".concat(e)}},{key:"createBoard",value:function(e){this.board.innerHTML="",this.cells=[];for(var t=0;t<e;t++){var r=document.createElement("div");r.className="cell",this.board.appendChild(r),this.cells.push(r)}}},{key:"lockField",value:function(e){e?this.board.classList.add("blocked"):this.board.classList.remove("blocked")}},{key:"getCell",value:function(e){return this.cells[e]}}])&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.record=0,this.timeLeft=60,this.isActive=!1},(t=[{key:"reset",value:function(){this.score=0,this.timeLeft=60}},{key:"updateScore",value:function(e){this.score+=e}},{key:"updateRecord",value:function(){this.score>this.record&&(this.record=this.score)}},{key:"countdown",value:function(){this.timeLeft--}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const a=e.p+"assets/2dbd01ce16c0fa83cb67.png";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}new(function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=r,this.currentGoblinCellIndex=null,this.gameInterval=null,this.timerInterval=null,this.view.createBoard(16),this._addEventListeners()},(t=[{key:"start",value:function(){var e=this;this.model.reset(),this.view.renderScore(this.model.score),this.view.renderRecord(this.model.record),this.view.renderTimer(this.model.timeLeft),this.view.lockField(!1),this.model.isActive=!0,this._showGoblin(),this.gameInterval=setInterval(function(){return e._showGoblin()},1500),this.timerInterval=setInterval(function(){return e._countdown()},1e3)}},{key:"stop",value:function(){clearInterval(this.gameInterval),clearInterval(this.timerInterval),this.view.lockField(!0),this.model.updateRecord(),this.view.renderRecord(this.model.record),this.model.isActive=!1,alert("Игра окончена! Ваш результат: ".concat(this.model.score))}},{key:"_showGoblin",value:function(){var e=this;this._removeGoblin();var t=this.view.cells.filter(function(t,r){return r!==e.currentGoblinCellIndex}),r=Math.floor(Math.random()*t.length);this.currentGoblinCellIndex=r,this.view.getCell(r).innerHTML='<img src="'.concat(a,'" alt="Гоблин" />')}},{key:"_removeGoblin",value:function(){null!==this.currentGoblinCellIndex&&(this.view.getCell(this.currentGoblinCellIndex).innerHTML="")}},{key:"_countdown",value:function(){this.model.countdown(),this.view.renderTimer(this.model.timeLeft),this.model.timeLeft<=0&&this.stop()}},{key:"handleBoardClick",value:function(e){if(this.model.isActive){var t=e.target.closest(".cell");if(t){var r=this.view.cells.indexOf(t);-1!==r&&r===this.currentGoblinCellIndex&&(this.model.updateScore(1),this.view.renderScore(this.model.score),this._removeGoblin())}}}},{key:"_addEventListeners",value:function(){var e=this;this.view.board.addEventListener("click",function(t){return e.handleBoardClick(t)}),document.querySelector("#restartBtn").addEventListener("click",function(){return e.start()})}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())(new s,new o({scoreId:"score",recordId:"record",timerId:"timer",boardId:"gameBoard"})).start()})();